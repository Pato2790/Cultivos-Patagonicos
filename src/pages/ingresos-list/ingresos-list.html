<ion-header>
  <ion-navbar color="cultivos" hideBackButton="true">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Ingresos</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding class="back-color">
  <ion-grid>
    <ion-row>
      <ion-col col-12>
        <h1 padding text-center>Listado de Ingresos</h1>
        <p text-center>Listado de de todos los ingresos de fruta con sus correspondientes lotes</p>
      </ion-col>
      <ion-col padding col-12 class="accordion-list" *ngFor=" let ingreso of ingresosList; let i = 'index'">
        <button ion-item class="no-border-cards" (click)="toggleIngreso(i)" detail-none [ngClass]="{ 'section-active': ingreso.open, 'section': !ingreso.open }">
          <ion-row align-items-center>
            <ion-col col-2 col-sm-1 col-md-1 col-lg-1>
              <ion-icon item-left name="arrow-forward" *ngIf="!ingreso.open"></ion-icon>
              <ion-icon item-left name="arrow-down" *ngIf="ingreso.open"></ion-icon>
            </ion-col>        
            <ion-col col-10 col-sm-7 col-md-9 col-lg-9>
              <h2 padding text-center>Remito {{ingreso.nroRemito}}</h2>
            </ion-col>
            <ion-col col-8 offset-2 col-sm-4 col-md-2 col-lg-2 offset-sm-0 offset-md-0 offset-lg-0>
              <ion-row align-items-center>
                <ion-col col-3 class="vertical-align-icon">
                  <button ion-button icon-only small outline color="white" (click)="goToLotes(ingreso)"><ion-icon name="cube"></ion-icon></button>
                </ion-col>
                <ion-col col-3 class="vertical-align-icon">
                  <button ion-button icon-only small outline color="white" (click)="goToViajes(ingreso)"><ion-icon name="bus"></ion-icon></button>
                </ion-col>
                <ion-col col-3 class="vertical-align-icon">
                  <button ion-button icon-only small outline color="white" (click)="goToEditIngreso(ingreso)"><ion-icon name="create"></ion-icon></button>
                </ion-col>
                <ion-col col-3 class="vertical-align-icon">
                  <button ion-button icon-only small outline color="white" (click)="alertDeleteIngreso(ingreso.id)"><ion-icon name="trash"></ion-icon></button>
                </ion-col>
              </ion-row>
            </ion-col>
          </ion-row>
        </button>
        <ion-grid *ngIf="ingreso.open" class="back-black-color">
          <ion-row>
            <ion-col padding col-sm-12 col-md-12>
              <ion-row>
                <ion-col padding col-sm-12 col-md-6>
                  <ion-item class="no-border">
                    <ion-icon name="calendar" item-start></ion-icon>
                      {{ingreso.fechaIngreso}}
                  </ion-item>
                </ion-col>
                <ion-col padding col-sm-12 col-md-6>
                  <ion-item class="no-border">
                    <ion-icon name="contact" item-start></ion-icon>
                      {{ingreso.createdFor}}
                  </ion-item>
                </ion-col>
                <ion-col padding col-sm-12 col-md-4>
                  <ion-item class="no-border">
                    <ion-icon name="leaf" item-start></ion-icon>
                      {{ingreso.lotes[0].chacra.renspa}} - {{ingreso.lotes[0].chacra.nombre}}
                  </ion-item>
                </ion-col>
                <ion-col padding col-sm-12 col-md-4>
                  <ion-item class="no-border">
                    <ion-icon name="home" item-start></ion-icon>
                      {{ingreso.ingresos_viajes[0].institucion.nombre}}
                  </ion-item>
                </ion-col>
                <ion-col padding col-sm-12 col-md-4>
                  <ion-item class="no-border">
                    <ion-icon name="bus" item-start></ion-icon>
                      {{ingreso.ingresos_viajes[0].camion.nombreChofer}}
                  </ion-item>
                </ion-col>
              </ion-row>
            </ion-col>
            <!--ion-col *ngFor="let lote of ingreso.lotes" padding col-sm-12 col-md-4>
              <ion-list>
                <ion-item class="no-border">
                  <ion-card>
                    <ion-card-header no-padding no-margin class="card-hearder-color no-border">
                      <ion-row>
                        <ion-col col-md-6 no-padding>
                          <h2 margin text-center class="black-color">Lote Nro {{lote.nroLote}}</h2>
                        </ion-col>
                        <ion-col col-md-6 no-padding> 
                          <ion-buttons right>
                            <button ion-button clear color="white" icon-only small (click)="goToEditLote(lote)">
                              <ion-icon name="create"></ion-icon>
                            </button>
                            <button ion-button clear color="white" icon-only small (click)="alertDeleteLote(lote.id)">
                              <ion-icon name="trash"></ion-icon>
                            </button>
                          </ion-buttons>
                        </ion-col>
                      </ion-row>
                    </ion-card-header>
                    <ion-card-content>
                      <ion-list no-padding no-margin>
                        <ion-item class="no-border">
                          <ion-icon name="cube" item-start></ion-icon>
                          {{lote.cantBins}} Bins
                        </ion-item>
                        <ion-item class="no-border">
                          <ion-icon name="podium" item-start></ion-icon>
                          {{lote.pesoNeto}} Kgs
                        </ion-item>
                        <ion-item class="no-border">
                          <ion-icon name="rose" item-start></ion-icon>
                          {{lote.especy.tipo}}
                        </ion-item>
                        <ion-item class="no-border">
                          <ion-icon name="flower" item-start></ion-icon>
                          {{lote.variedad.tipo}}
                        </ion-item>
                        <ion-item class="no-border">
                          <ion-icon name="star-half" item-start></ion-icon>
                          {{lote.calidad.tipo}}
                        </ion-item>
                        <ion-item class="no-border">
                          <ion-icon name="color-fill" item-start></ion-icon>
                          {{lote.tratamiento.tipo}}
                        </ion-item>
                        <ion-item class="no-border">
                          <ion-icon name="grid" item-start></ion-icon>
                          {{lote.cuadro.up}}
                        </ion-item>
                      </ion-list>
                    </ion-card-content>
                  </ion-card>
                </ion-item>
              </ion-list>    
            </ion-col-->
          </ion-row>
        </ion-grid>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>